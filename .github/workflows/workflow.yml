name: Flutter-CI
on: [push]
jobs: 
  test-and-build: 
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Java Setup
      uses: actions/setup-java@v1
      with:
        java-version: '12.x'
    - name: Flutter Setup
      uses: subosito/flutter-action@v1
      with:
        flutter-version: '1.12.x'
        channel: 'stable'
    # Get flutter packages
    - name: Flutter Packages
      working-directory: route-app
      run: flutter pub get
    # Analyze Dart
    - name: Analyze Dart
      working-directory: route-app
      run: flutter analyze
    # Run tests
    - name: Flutter Tests
      working-directory: route-app
      run: flutter test
    # Build 
    - name: Build Apk
      working-directory: route-app
      run: flutter build apk
